# 飞帖建站教程

本篇教程将引导你一步一步搭建起自己的飞帖站点。如有不清楚的地方，或者遇到任何困难，可以直接[联系我们](/flying-pub/遇到问题了可以找谁咨询？)来帮助你。

## 你需要准备好两个东西

首先是需要一台**服务器**（机器），用来运行你的飞帖站点，

其次你需要一个**域名**，指向上面提到的这台服务器

如何验证我的域名和服务器都已经准备好了？

打开 [Ping 检测工具](https://ping.chinaz.com/)，输入你的域名，监测结果中响应 IP 是你服务器的 IP，那就说明是正确的，域名和服务器就准备好了。

比如 [https://ping.chinaz.com/zuopin.xin](https://ping.chinaz.com/zuopin.xin)

![](./images/ping.png)

## 创建 Mixin App

为了让你的站点支持 Mixin 登录和数字货币支付，你需要创建一个 Mixin App

打开 Mixin 开发者后台，[https://developers.mixin.one/dashboard](https://developers.mixin.one/dashboard)

创建一个 App，有两个地方需要特别注意：

1. 首页网址需要填你站点的主页，假如你的域名是 a.com，那这里就填 https://a.com
2. 验证网址需要填特定的地址，假设你的域名是 a.com，那这里就填 https://a.com/api/auth/mixin/callback

如下图所示：

![](./images/mixin-callback.png)

## 下载 PRS ATM 客户端

- Mac 版本，[点击下载](https://static-assets.xue.cn/prs-atm/PRS-ATM-1.0.14.dmg)
- Windows 版本，[点击下载](https://static-assets.xue.cn/prs-atm/PRS-ATM-1.0.14.exe)

## 免费注册开发者账号

打开 PRS ATM，免费注册开发者账号

![](./images/login-entry.png)
![](./images/signup-developer.png)

## 设置应用名称

给你的站点起一个名字

![](./images/desc-1.png)
![](./images/desc-2.png)

## 领取 500 PRS 启动资金

一篇文章发布到 PRS 链上，需要节点打包和生产新的区块，才能得到确认。

当你想要把文章发布到 PRS 链上，每篇文章需要支付 0.13 PRS 的手续费。这个手续费是给节点打包出块的报酬。

不过你放心，PRS 团队会给你的飞帖站点一笔启动资金作为补贴。如果你想要运行自己的飞帖站点，你可以添加刘娟娟的 Mixin（28576），领取 500 PRS 的启动资金。

## 给开发者账号充值

![](./images/recharge.png)

使用 Mixin 扫码即可充值。

一开始可以先尝试小额充值，比如 10 PRS，等搭建完毕，站点开始正常运行时再继续充值。

## 生成飞帖配置文件

![](./images/config-generator-entry.png)

你需要打开刚才注册的 Mixin App，把对应的信息填过来

![](./images/mixin-id.png)
![](./images/mixin-secret.png)
![](./images/mixin-session.png)

点击生成配置文件

![](./images/download-config.png)

把生成的两份配置文件下载到本地，准备工作都已经完成啦！

## 登录服务器

登录到你的服务器，下面我们正式开始在服务器上面运行飞帖

## 安装 Docker 和 Docker Compose

你可以根据服务器的系统类型，找到对应的安装方法

比如我的服务器是 Ubuntu 18.04，那么我就按照这两篇教程文章来安装

- [How To Install Docker On Ubuntu 18.04](https://phoenixnap.com/kb/how-to-install-docker-on-ubuntu-18-04)
- [How To Install Docker Compose On Ubuntu 18.04](https://phoenixnap.com/kb/install-docker-compose-ubuntu)

## 获取飞帖搭建代码

```
git clone https://github.com/Press-One/flying-pub-setup.git
cd flying-pub-setup
```

## 把配置文件传到目录下面

把刚才在 PRS-ATM 生成的两份配置文件传到根目录的 `config` 下面

![](./images/config-folder.png)

也就是说，这一步需要你把本地电脑的文件，传到服务器上面，一般有两个做法：

假如你是用命令行登录服务器的，那么你可以用 `scp` 命令，比如说

```
scp -r /我本地电脑的目录/config.js 服务器账号@服务器地址:~/flying-pub-setup/config/config.js
scp -r /我本地电脑的目录/config.wallet.js 服务器账号@服务器地址:~/flying-pub-setup/config/config.wallet.js
```

假如你的服务器提供商有配套界面的，那就更容易了，你点下传文件按钮，应该就可以把文件传到这个目录了。

如有困难，可以[联系我们](/flying-pub/遇到问题了可以找谁咨询？)来帮助你

## 一键启动飞帖

```
./scripts/setup.sh
```

这个命令会帮你配置 HTTPS 证书，然后启动服务。

整个过程需要花费几分钟

如果遇到了错误，可以[联系我们](/flying-pub/遇到问题了可以找谁咨询？)来帮助你

## 验证你的站点

运行

```
docker ps
```

观察 STATUS 那一列，如果显示 UP xxx，那就说明服务是正常运行的

![](./images/docker-status.png)

否则可能是出现异常了，可以[联系我们](/flying-pub/遇到问题了可以找谁咨询？)来帮助你

最后你在浏览器访问你的域名，可以顺利看到飞帖的界面，并且所有功能都正常使用，那么搭建就完成啦！

## 如何自定义我的站点？

目前你的站点是使用默认的配置。你可能需要修改一些配置，以满足你的需要，[配置修改和说明可以查看这里](/flying-pub/如何修改站点的配置？)。

## 后续的注意事项

如果 PRS 团队补贴的 500 PRS 用完了，可以尝试找刘娟娟申请新的补贴。

或者你用自己的 PRS 进行充值，以支付上链的费用。
